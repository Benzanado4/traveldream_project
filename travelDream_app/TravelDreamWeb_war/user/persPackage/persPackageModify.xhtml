<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<h:body>

	<ui:composition template="/template/common/templateLayout.xhtml">

		<ui:define name="content">

			<div id="page_content">

				<h:form id="insertPersPackageForm">

					<p:wizard flowListener="#{persPackageBean.onFlowProcess}">



						<!-- FLIGHT TAB  -->
						<p:tab id="newPackageFlights" title="Voli">

							<h:message errorClass="error" />

							<p:dataTable id="newPackageFlightsTable" var="flight"
								value="#{persPackageBean.flightDTODataModel}"
								selection="#{persPackageBean.packageFlights}">


								<p:column selectionMode="multiple" style="width:2%" />

								<p:column headerText="Nome" style="width:15%">
									<h:outputText value="#{flight.name}" />
								</p:column>

								<p:column headerText="Descrizione" style="width:35%">
									<h:outputText value="#{flight.description}" />
								</p:column>


								<p:column headerText="Citta di Partenza" style="width:10%">
									<h:outputText value="#{flight.city1Name}" />
								</p:column>

								<p:column headerText="Citta di Arrivo" style="width:10%">
									<h:outputText value="#{flight.city2Name}" />
								</p:column>

								<p:column headerText="Data" style="width:10%">
									<h:outputText value="#{flight.date}">
										<f:convertDateTime pattern="dd/MM/yyyy" />
									</h:outputText>
								</p:column>

								<p:column headerText="Prezzo" style="width:10%">
									<h:outputText value="#{flight.price}" />
									<h:outputText value=" €" />
								</p:column>

							</p:dataTable>

						</p:tab>

						<!-- HOTEL TAB  -->
						<p:tab id="newPackageHotels" title="Hotel">

							<h:message errorClass="error" />

							<p:dataTable id="newPackagHotelsTable" var="hotel"
								value="#{persPackageBean.hotelDTODataModel}"
								selection="#{persPackageBean.packageHotels}">

								<p:column selectionMode="multiple" style="width:2%" />

								<p:column headerText="Nome" style="width:15%">
									<h:outputText value="#{hotel.name}" />
								</p:column>

								<p:column headerText="Descrizione" style="width:35%">
									<h:outputText value="#{hotel.description}" />
								</p:column>

								<p:column headerText="Citta" style="width:10%">
									<h:outputText value="#{hotel.cityName}" />
								</p:column>

								<p:column headerText="Prezzo" style="width:10%">
									<h:outputText value="#{hotel.price}" />
									<h:outputText value=" €" />
								</p:column>

							</p:dataTable>

						</p:tab>

						<!-- EXCURSION TAB  -->
						<p:tab id="newPackageExcursions" title="Escursioni">

							<h:message errorClass="error" />

							<p:dataTable id="newPackageExcursionTable" var="excursion"
								value="#{persPackageBean.excursionDTODataModel}"
								selection="#{persPackageBean.packageExcursion}">


								<p:column selectionMode="multiple" style="width:2%" />

								<p:column headerText="Nome" style="width:15%">
									<h:outputText value="#{excursion.name}" />
								</p:column>

								<p:column headerText="Descrizione" style="width:35%">
									<h:outputText value="#{excursion.description}" />
								</p:column>

								<p:column headerText="Citta" style="width:10%">
									<h:outputText value="#{excursion.cityName}" />
								</p:column>

								<p:column headerText="Data" style="width:10%">
									<h:outputText value="#{excursion.date}">
										<f:convertDateTime pattern="dd/MM/yyyy" />
									</h:outputText>
								</p:column>

								<p:column headerText="Prezzo" style="width:10%">
									<h:outputText value="#{excursion.price}" />
									<h:outputText value=" €" />
								</p:column>

							</p:dataTable>

						</p:tab>




						<p:tab id="newPackageConfirm" title="Conferma">

							<h:panelGrid id="confirm" columns="2">

								<h:outputText value="Nome: " styleClass="defaultPageContent" />
								
								<HR styleClass="separator" />

								<h:outputText value="#{persPackageBean.persPackageDTO.name}" />
								<br />


								<h:outputText value="Descrizione: " styleClass="defaultPageContent" />
								<HR styleClass="separator" />

								<h:outputText
									value="#{persPackageBean.persPackageDTO.description}" />


							</h:panelGrid>

							<br />

							<p:graphicImage style="width: 950px; height:450px; margin: 0px;"
								value="/resources/images/packages/#{persPackageBean.persPackageDTO.imageId}.jpg"></p:graphicImage>
							<br />

							<h:outputText value="Voli: " styleClass="defaultPageContent" />
							<HR styleClass="separator" />


							<p:dataTable id="newPackageFlightsTableSummary" var="flight"
								value="#{persPackageBean.packageFlights}">


								<p:column headerText="Nome" style="width:15%">
									<h:outputText value="#{flight.name}" />
								</p:column>

								<p:column headerText="Descrizione" style="width:35%">
									<h:outputText value="#{flight.description}" />
								</p:column>


								<p:column headerText="Citta di Partenza" style="width:10%">
									<h:outputText value="#{flight.city1Name}" />
								</p:column>

								<p:column headerText="Citta di Arrivo" style="width:10%">
									<h:outputText value="#{flight.city2Name}" />
								</p:column>

								<p:column headerText="Data" style="width:10%">
									<h:outputText value="#{flight.date}" />
								</p:column>

								<p:column headerText="Prezzo" style="width:10%">
									<h:outputText value="#{flight.price}" />
								</p:column>

							</p:dataTable>

							<br />

							<h:outputText value="Hotel: " styleClass="defaultPageContent" />
							<HR styleClass="separator" />


							<p:dataTable id="newPackagHotelsTableSummary" var="hotel"
								value="#{persPackageBean.packageHotels}">

								<p:column headerText="Nome" style="width:15%">
									<h:outputText value="#{hotel.name}" />
								</p:column>

								<p:column headerText="Descrizione" style="width:35%">
									<h:outputText value="#{hotel.description}" />
								</p:column>

								<p:column headerText="Citta" style="width:10%">
									<h:outputText value="#{hotel.cityName}" />
								</p:column>

								<p:column headerText="Prezzo" style="width:10%">
									<h:outputText value="#{hotel.price}" />
								</p:column>

							</p:dataTable>

							<br />

							<h:outputText value="Escursioni: "
								styleClass="defaultPageContent" />
							<HR styleClass="separator" />


							<p:dataTable id="newPackageExcursionTableSummary" var="excursion"
								value="#{persPackageBean.packageExcursion}">


								<p:column headerText="Nome" style="width:15%">
									<h:outputText value="#{excursion.name}" />
								</p:column>

								<p:column headerText="Descrizione" style="width:35%">
									<h:outputText value="#{excursion.description}" />
								</p:column>

								<p:column headerText="Citta" style="width:10%">
									<h:outputText value="#{excursion.cityName}" />
								</p:column>

								<p:column headerText="Data" style="width:10%">
									<h:outputText value="#{excursion.date}" />
								</p:column>

								<p:column headerText="Prezzo" style="width:10%">
									<h:outputText value="#{excursion.price}" />
								</p:column>

							</p:dataTable>

							<br />

							<h:outputText value="Prezzo Totale: " />
							<h:outputText styleClass="outputLabel"
								value="#{persPackageBean.calculatePrice()}" />

							<br />

							<p:commandButton value="Conferma"
								action="#{persPackageBean.updatePersPackage()}" />

						</p:tab>

					</p:wizard>



				</h:form>


				<p:messages id="messages" showDetail="false" autoUpdate="true"
					closable="true" />

			</div>

		</ui:define>

	</ui:composition>

</h:body>



</html>